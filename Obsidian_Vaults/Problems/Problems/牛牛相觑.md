How to make it: Tutorial
Tags: Differential, Greedy
Time Created: June 19, 2022 4:38 PM

[1054-[USACO 2007 Jan S]Tallest Cow_2021秋季算法入门班第一章习题：模拟、枚举、贪心 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/20960/1054)

作为学习差分算法的起点

### 思路：

    其实很简单，牛看到是相互的，而且题目要求的是最大高度，所以直接贪心，将所有牛设为最高的。然后再把两个相互能看见的牛之间的所有牛高度减一就行，如果直接模拟这个过程的话，时间复杂度会是$O(m\times n)$，所以我们使用差分的方法进行计算。

    差分的关键在于前置和的使用，使用使用数组 `c[]` 来储存需要修改的起始和结束节点（中间的节点保持为0，前置和会将它们统计起来），然后用另一个数组对前置和进行计算，然后我们就得到了所有节点需要修改的值。

### 代码：

```cpp
#include <bits/stdc++.h>

using namespace std;
#define  endl '\n'
#define int long long
#define MAXN 60
typedef pair<int, int> pii;

void solve() {
	int num, hp, hn, q;
	cin >> num >> hp >> hn >> q;
	vector<int> diff(num + 1), res(num + 1);
	map<pii, bool> mp;

	for(int i = 0; i < q; i++) {
		int a, b;
		cin >> a >> b;
		pii p(min(a, b), max(a, b));
		if(mp[p])continue;//!!!
		mp[p] = true;
		diff[p.first + 1]--;
		diff[p.second]++;
	}
	for(int i = 1; i <= num; i++) {
		res[i] = res[i - 1] + diff[i];
		cout << hn + res[i] << endl;
	}
}

signed main() {
	cin.tie(nullptr)->sync_with_stdio(false);
	int t = 1;
//	scanf("%lld", &t);
	// cin >> t;
	while (t--) solve();
}
```