How to make it: Tutorial
Tags: Graph
Time Created: September 3, 2022 9:56 PM

[https://codeforces.com/gym/102956/my](https://codeforces.com/gym/102956/my)

**思路**：

    一条边上的两个顶点只有一个要操作，这都没想到二分图属实是说不过去了。注意不连通的二分图要将每一段分开染色！

- Code
    
    ```cpp
    #include <bits/stdc++.h>
    
    #define MAXN 300020
    #define int long long
    #define endl '\n'
    #define IO cin.tie(nullptr)->sync_with_stdio(0)
    using namespace std;
    
    typedef pair<int, int> pii;
    vector<int> v[MAXN];
    vector<int> cnt(2);
    int ans;
    
    bool isBipartite(vector<int> v[], int n) {
        vector<int> col(n + 2, -1); //-1 for not colored
    
        queue<int> q;
    
        for (int i = 1; i <= n; i++) {
            cnt[0] = cnt[1] = 0;
            if (col[i] == -1) {
                q.push(i);
                col[i] = 0;
                cnt[0]++;
                while (!q.empty()) {
                    int cur = q.front();
                    int c = col[cur] == 0 ? 1 : 0;
                    q.pop();
                    for (int &j : v[cur]) {
                        if (col[j] == -1) {
                            col[j] = c;
                            cnt[c]++;
                            q.push(j);
                        }
                        if (col[j] != c)
                            return false;
                    }
                }
            }
            ans += min(cnt[0], cnt[1]);
        }
        return true;
    }
    
    void solve() {
        int n, m;
        cin >> m >> n;
        for (int i = 0; i < n; i++) {
            int x, y;
            cin >> x >> y;
            v[x].emplace_back(y);
            v[y].emplace_back(x);
        }
    
        if (!isBipartite(v, m))
            cout << "-1";
        else
            cout << ans;
    }
    
    signed main() {
        IO;
        int T = 1;
        // cin >> T;
        while (T--)
            solve();
        return 0;
    }
    ```