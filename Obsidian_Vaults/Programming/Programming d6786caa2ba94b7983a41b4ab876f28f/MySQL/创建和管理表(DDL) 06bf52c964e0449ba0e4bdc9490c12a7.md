# 创建和管理表(DDL)

## 基础

### 数据的存储

![Untitled](Programming/Programming%20d6786caa2ba94b7983a41b4ab876f28f/MySQL/创建和管理表(DDL)%2006bf52c964e0449ba0e4bdc9490c12a7/Untitled.png)

### 标识符命名规则

1. 数据库名、表名不得超过30个字符，变量名限制为29个
2. 必须只能包含 A–Z, a–z, 0–9, _共63个字符
3. 数据库名、表名、字段名等对象名中间不要包含空格
4. 同一个MySQL软件中，数据库不能同名；同一个库中，表不能重名；同一个表中，字段不能重名
5. 必须保证你的字段没有和保留字、数据库系统或常用方法冲突。如果坚持使用，请在SQL语句中使用 ```（着重号）引起来
6. 保持字段名和类型的一致性：在命名字段并为其指定数据类型的时候一定要保证一致性，假如数据类型在一个表里是整数，那在另一个表里可就别变成字符型了

### `MySQL` 数据类型

![Untitled](Programming/Programming%20d6786caa2ba94b7983a41b4ab876f28f/MySQL/创建和管理表(DDL)%2006bf52c964e0449ba0e4bdc9490c12a7/Untitled%201.png)

![Untitled](Programming/Programming%20d6786caa2ba94b7983a41b4ab876f28f/MySQL/创建和管理表(DDL)%2006bf52c964e0449ba0e4bdc9490c12a7/Untitled%202.png)

## 数据库

### 创建数据库

三个方式：

1. `creat database demo`
    
    使用默认的字符集创建
    
2. `creat database demo1 character set 'gbk'`
    
    手动指定字符集
    
3. `creat database if not exists demo2` #推荐
    
    如果创建的数据库已经存在就放弃创建，不报错 
    

### 管理数据库

- 查看当前所有的数据库
    
    `SHOW DATABASES; #有一个S，代表多个数据库`
    
- 查看当前正在使用的数据库
    
    `SELECT DATABASE(); #使用的一个 mysql 中的全局函数`
    
- 查看指定库下所有的表
    
    `SHOW TABLES FROM 数据库名;`
    
- 查看数据库的创建信息
    
    `SHOW CREATE DATABASE 数据库名;`
    或者：
    `SHOW CREATE DATABASE 数据库名\G`
    
- 使用/切换数据库
    
    `USE 数据库名;`
    
- **注意：** 要操作表格和数据之前必须先说明是对哪个数据库进行操作，否则就要对所有对象加上“数据库名.”。

### 修改数据库

更改字符集：

`alter database demo character set 'utf8'`

**注意：** DATABASE 不能改名。一些可视化工具可以改名，它是建新库，把所有表复制到新库，再删
旧库完成的。

### 删库跑路

- `drop database demo`
- `demo database is exists demo` #建议

## 表

### 创建表

1. **方法一：创建新表**
    1. 需要：创建表的权限 & 硬盘上的空间
    2. 语法：
        
        ```sql
        CREATE TABLE [IF NOT EXISTS] 表名(
        字段1, 数据类型 [约束条件] [默认值],
        字段2, 数据类型 [约束条件] [默认值],
        字段3, 数据类型 [约束条件] [默认值],
        ……
        [表约束条件]
        );
        #ex.
        create table demo(
        id int,
        name varchar(20),# 必须 在创建的时候指明其长度
        hire_date date
        );
        ```
        
    3. 必须指定：
        1. 表名
        2. 字段名，数据类型，长度（比如 `varchar` )
    4. 可以指定：
        1. 约束条件
        2. 默认值（不指定就是 `null` )
2. **方法二：基于现有的表**
    1. 比如
        
        ```sql
        CREATE TABLE dept80
        AS
        SELECT employee_id, last_name, salary*12 ANNSAL, hire_date
        FROM employees
        WHERE department_id = 80;
        ```
        
        相似的，可以只拷贝字段且不包括数据。
        
        ```sql
        create table employee_blank
        as
        select *
        from employees
        where 1=2;  #选择固定的字段会有风险。
        ```
        
    2. **注意：** 在 `select` 中，如果给列起了别名，那么新的表中会以别名命名字段。