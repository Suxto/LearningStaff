# 开始

1. 准备好 `tomcat` 。
    1.  `servlet` 不属于 `Java` 自带的包，需要添加依赖，需要的 `Jar` 文件在 `tomcat` 里面有提供
        
        ![Untitled](Programming/Programming%20d6786caa2ba94b7983a41b4ab876f28f/Java/MVC%20211412758b204337b1edf5735ac39cf9/开始%207f2531395d6d456a831c5a3c0cada713/Untitled.png)
        
    2. 添加 `tomcat` 的配置信息
        
        ![Untitled](Programming/Programming%20d6786caa2ba94b7983a41b4ab876f28f/Java/MVC%20211412758b204337b1edf5735ac39cf9/开始%207f2531395d6d456a831c5a3c0cada713/Untitled%201.png)
        
2. 处理来自网页的请求
    1. 在一个继承了 `servlet` 的类中，建立 `doPost` 方法来承接来自网页的 `post` 请求
        
        ```java
        package com.example.servletdemo;
        
        import javax.servlet.ServletException;
        import javax.servlet.http.HttpServlet;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;
        import java.io.IOException;
        
        public class addServlet extends HttpServlet {
            @Override
            protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        
            }
        }
        ```
        
    2. 在 `doPost` 方法中，处理请求
        
        ```java
        		@Override
            protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
                String fname = request.getParameter("fname");//根据参数名得到值
                int price = Integer.parseInt(request.getParameter("price"));
                //...
            }
        ```
        
    3. 修改 `servlet` 的请求映射文件 `web.xml` ，将操作映射到对应的方法中
        
        ```xml
        <servlet>
                <servlet-name>AddServlet</servlet-name>
                <servlet-class>com.example.servletdemo.AddServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>AddServlet</servlet-name>
            <url-pattern>/add</url-pattern>
        </servlet-mapping>
        ```
        
        如果不修改 `web.xml` 可以将这些信息写在注解中，但是两种方法只能二选一
        
        ```java
        @WebServlet(name = "addServlet", value = "/add")
        public class AddServlet extends HttpServlet {/...
        }
        ```
        
    4. 处理流程
        1. 用户发起请求， `action=add` 
        2. `tomcat` 找到 `url-pattern=/add` 
        3. 根据 `url-pattern` 找到 `servlet-name=AddServlet` 
        4. 根据 `servlet-name` 在 `servlet-mapping` 找到对应的类
        5. 如果传入的方法是 `post` 就会调用类中的 `doPost()` 方法
3. **设置编码， 不设置可能 `post` 中文会乱码，如果 `tomcat` 版本在 8 以上，不用设置 `get` 方法的编码**
    
    ```java
    //放在所有获取参数的语句之前
    request.setCharacterEncoding("UTF-8");
    ```
    
4. s